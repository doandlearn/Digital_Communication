<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2024b"><title>Untitled</title><style type="text/css">.rtcContent { padding: 30px; } .CodeBlock { background-color: #F5F5F5; margin: 10px 15px 10px 0; display: inline-block }
.S0 { border-left: 0.8px solid rgb(217, 217, 217); border-right: 0.8px solid rgb(217, 217, 217); border-top: 0.8px solid rgb(217, 217, 217); border-bottom: 0px none rgb(33, 33, 33); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S1 { border-left: 0.8px solid rgb(217, 217, 217); border-right: 0.8px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 0px none rgb(33, 33, 33); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S2 { border-left: 0.8px solid rgb(217, 217, 217); border-right: 0.8px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 0.8px solid rgb(217, 217, 217); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }</style></head><body><div class = rtcContent><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S0'><span style="white-space: pre"><span style="color: #008013;">% Read the audio signal and gather information</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >[audioSignal, fs] = audioread(</span><span style="color: #a709f5;">'C:\Users\shabi melwin\Music\1sec.wav'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >audioInfo = audioinfo(</span><span style="color: #a709f5;">'C:\Users\shabi melwin\Music\1sec.wav'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >[~, ~, ext] = fileparts(audioInfo.Filename);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >fileFormat = ext(2:end);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'File Format: '</span><span >, fileFormat]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >fileSize = audioInfo.TotalSamples * audioInfo.BitsPerSample / 8; </span><span style="color: #008013;">% in bytes</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >duration = audioInfo.Duration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >bitDepth = audioInfo.BitsPerSample;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >bitrate = fs * bitDepth * audioInfo.NumChannels; </span><span style="color: #008013;">% in bps</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >freqRange = fs / 2;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >audioSpecs = table({</span><span style="color: #a709f5;">'File Format'</span><span >; </span><span style="color: #a709f5;">'File Size (Bytes)'</span><span >; </span><span style="color: #a709f5;">'Duration (sec)'</span><span >; </span><span style="color: #a709f5;">'Bit Depth'</span><span >; </span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bitrate (bps)'</span><span >; </span><span style="color: #a709f5;">'Frequency Range (Hz)'</span><span >}, </span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >                   {fileFormat; fileSize; duration; bitDepth; bitrate; freqRange}, </span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >                   </span><span style="color: #a709f5;">'VariableNames'</span><span >, {</span><span style="color: #a709f5;">'Property'</span><span >, </span><span style="color: #a709f5;">'Value'</span><span >});</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp(audioSpecs);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Mono conversion</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #0e00ff;">if </span><span >size(audioSignal, 2) &gt; 1</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >    audioSignal = mean(audioSignal, 2);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Quantization</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >n_bits = 8;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >quantizedSignal = round(audioSignal * (2^(n_bits - 1))) / (2^(n_bits - 1));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >quantizedSignalInt = floor((quantizedSignal + 1) * (2^(n_bits - 1)));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Huffman Encoding</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >symbols = unique(quantizedSignalInt);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >counts = histcounts(quantizedSignalInt, [symbols; max(symbols) + 1]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >probabilities = counts / sum(counts);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >huffDict = huffmandict(symbols, probabilities);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >huffEncodedSignal = huffmanenco(quantizedSignalInt, huffDict);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Compression ratio</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >originalSize = numel(quantizedSignalInt) * n_bits;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >compressedSize = numel(huffEncodedSignal);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >compressionRatio = originalSize / compressedSize;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Huffman Decoding and reconstruction</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >huffDecodedSignal = huffmandeco(huffEncodedSignal, huffDict);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >reconstructedSignal = (huffDecodedSignal / (2^(n_bits - 1))) - 1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Calculate noise and SNR</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >noise = audioSignal - reconstructedSignal;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >snrValue = 10 * log10(sum(audioSignal.^2) / sum(noise.^2));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'SNR: '</span><span >, num2str(snrValue), </span><span style="color: #a709f5;">' dB'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Entropy and efficiency</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >entropyValue = -sum(probabilities .* log2(probabilities + eps));  </span><span style="color: #008013;">% Entropy formula</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'Entropy of the quantized signal: '</span><span >, num2str(entropyValue), </span><span style="color: #a709f5;">' bits/symbol'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >efficiency = entropyValue / n_bits;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'Efficiency: '</span><span >, num2str(efficiency * 100), </span><span style="color: #a709f5;">' %'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Time vector</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >t = (1:length(audioSignal)) / fs;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Plot Original Audio Signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >plot(t, audioSignal);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >title(</span><span style="color: #a709f5;">'Original Audio Signal'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >xlabel(</span><span style="color: #a709f5;">'Time (s)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >ylabel(</span><span style="color: #a709f5;">'Amplitude'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >grid </span><span style="color: #a709f5;">on</span><span >; </span><span style="color: #008013;">% Add grid for better readability</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Plot Reconstructed Audio Signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >plot(t, reconstructedSignal);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >title(</span><span style="color: #a709f5;">'Reconstructed Audio Signal'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >xlabel(</span><span style="color: #a709f5;">'Time (s)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >ylabel(</span><span style="color: #a709f5;">'Amplitude'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >grid </span><span style="color: #a709f5;">on</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Plot Quantized Signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >plot(t, quantizedSignal);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >title(</span><span style="color: #a709f5;">'Quantized Signal'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >xlabel(</span><span style="color: #a709f5;">'Time (s)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >ylabel(</span><span style="color: #a709f5;">'Amplitude'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >grid </span><span style="color: #a709f5;">on</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Plot SNR Over Time</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >snr_time = 10 * log10(movmean(audioSignal.^2, fs) ./ movmean(noise.^2, fs));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >plot(t, snr_time);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >title(</span><span style="color: #a709f5;">'SNR Over Time'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >xlabel(</span><span style="color: #a709f5;">'Time (s)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >ylabel(</span><span style="color: #a709f5;">'SNR (dB)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >grid </span><span style="color: #a709f5;">on</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Frequency spectrum of original and reconstructed signals</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >f = linspace(0, fs/2, floor(length(audioSignal)/2) + 1);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >fftOriginal = abs(fft(audioSignal));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >fftReconstructed = abs(fft(reconstructedSignal));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >plot(f, 20*log10(fftOriginal(1:floor(length(audioSignal)/2) + 1)));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >hold </span><span style="color: #a709f5;">on</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >plot(f, 20*log10(fftReconstructed(1:floor(length(audioSignal)/2) + 1)));</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >title(</span><span style="color: #a709f5;">'Frequency Spectrum'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >xlabel(</span><span style="color: #a709f5;">'Frequency (Hz)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >ylabel(</span><span style="color: #a709f5;">'Magnitude (dB)'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >legend(</span><span style="color: #a709f5;">'Original'</span><span >, </span><span style="color: #a709f5;">'Reconstructed'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >grid </span><span style="color: #a709f5;">on</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >hold </span><span style="color: #a709f5;">off</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Quantization Table (if needed)</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >n_bits = 8;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >quantizationLevels = 2^n_bits;</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >samplingQuantizationTable = table(fs, duration, n_bits, quantizationLevels, </span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >                                  </span><span style="color: #a709f5;">'VariableNames'</span><span >, {</span><span style="color: #a709f5;">'SamplingRate_Hz'</span><span >, </span><span style="color: #a709f5;">'Duration_sec'</span><span >, </span><span style="color: #a709f5;">'BitDepth'</span><span >, </span><span style="color: #a709f5;">'QuantizationLevels'</span><span >});</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp(</span><span style="color: #a709f5;">'Sampling and Quantization Table:'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp(samplingQuantizationTable);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Step 1: Calculate the original file size based on original bit depth</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >originalFileSizeBits = audioInfo.TotalSamples * audioInfo.BitsPerSample;  </span><span style="color: #008013;">% Original size in bits</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >originalFileSizeBytes = originalFileSizeBits / 8;  </span><span style="color: #008013;">% Convert to bytes</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Step 4: Calculate the redundancy of compression</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >redundancy = 1 - (entropyValue / n_bits);  </span><span style="color: #008013;">% Redundancy formula</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'Redundancy: '</span><span >, num2str(redundancy * 100), </span><span style="color: #a709f5;">' %'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Step 2: Calculate the size of the quantized file in bits</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >quantizedFileSizeBits = numel(quantizedSignalInt) * n_bits;  </span><span style="color: #008013;">% Quantized signal size in bits</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >quantizedFileSizeBytes = quantizedFileSizeBits / 8;  </span><span style="color: #008013;">% Convert to bytes</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Step 3: Calculate the size of the compressed file in bits</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >compressedFileSizeBits = numel(huffEncodedSignal);  </span><span style="color: #008013;">% Huffman encoded signal length in bits</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >compressedFileSizeBytes = compressedFileSizeBits / 8;  </span><span style="color: #008013;">% Convert to bytes</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: #008013;">% Display the file sizes</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'Original File Size (Uncompressed): '</span><span >, num2str(originalFileSizeBytes), </span><span style="color: #a709f5;">' Bytes ('</span><span >, num2str(originalFileSizeBits), </span><span style="color: #a709f5;">' bits)'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'Quantized File Size: '</span><span >, num2str(quantizedFileSizeBytes), </span><span style="color: #a709f5;">' Bytes ('</span><span >, num2str(quantizedFileSizeBits), </span><span style="color: #a709f5;">' bits)'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span >disp([</span><span style="color: #a709f5;">'Compressed File Size: '</span><span >, num2str(compressedFileSizeBytes), </span><span style="color: #a709f5;">' Bytes ('</span><span >, num2str(compressedFileSizeBits), </span><span style="color: #a709f5;">' bits)'</span><span >]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S1'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S2'>&nbsp;</div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
% Read the audio signal and gather information
[audioSignal, fs] = audioread('C:\Users\shabi melwin\Music\1sec.wav');
audioInfo = audioinfo('C:\Users\shabi melwin\Music\1sec.wav');
[~, ~, ext] = fileparts(audioInfo.Filename);
fileFormat = ext(2:end);

disp(['File Format: ', fileFormat]);
fileSize = audioInfo.TotalSamples * audioInfo.BitsPerSample / 8; % in bytes
duration = audioInfo.Duration;
bitDepth = audioInfo.BitsPerSample;
bitrate = fs * bitDepth * audioInfo.NumChannels; % in bps
freqRange = fs / 2;

audioSpecs = table({'File Format'; 'File Size (Bytes)'; 'Duration (sec)'; 'Bit Depth'; ...
                    'Bitrate (bps)'; 'Frequency Range (Hz)'}, ...
                   {fileFormat; fileSize; duration; bitDepth; bitrate; freqRange}, ...
                   'VariableNames', {'Property', 'Value'});
disp(audioSpecs);

% Mono conversion
if size(audioSignal, 2) > 1
    audioSignal = mean(audioSignal, 2);
end

% Quantization
n_bits = 8;
quantizedSignal = round(audioSignal * (2^(n_bits - 1))) / (2^(n_bits - 1));
quantizedSignalInt = floor((quantizedSignal + 1) * (2^(n_bits - 1)));

% Huffman Encoding
symbols = unique(quantizedSignalInt);
counts = histcounts(quantizedSignalInt, [symbols; max(symbols) + 1]);
probabilities = counts / sum(counts);
huffDict = huffmandict(symbols, probabilities);
huffEncodedSignal = huffmanenco(quantizedSignalInt, huffDict);

% Compression ratio
originalSize = numel(quantizedSignalInt) * n_bits;
compressedSize = numel(huffEncodedSignal);
compressionRatio = originalSize / compressedSize;

% Huffman Decoding and reconstruction
huffDecodedSignal = huffmandeco(huffEncodedSignal, huffDict);
reconstructedSignal = (huffDecodedSignal / (2^(n_bits - 1))) - 1;

% Calculate noise and SNR
noise = audioSignal - reconstructedSignal;
snrValue = 10 * log10(sum(audioSignal.^2) / sum(noise.^2));
disp(['SNR: ', num2str(snrValue), ' dB']);

% Entropy and efficiency
entropyValue = -sum(probabilities .* log2(probabilities + eps));  % Entropy formula
disp(['Entropy of the quantized signal: ', num2str(entropyValue), ' bits/symbol']);
efficiency = entropyValue / n_bits;
disp(['Efficiency: ', num2str(efficiency * 100), ' %']);

% Time vector
t = (1:length(audioSignal)) / fs;

% Plot Original Audio Signal
figure;
plot(t, audioSignal);
title('Original Audio Signal');
xlabel('Time (s)');
ylabel('Amplitude');
grid on; % Add grid for better readability

% Plot Reconstructed Audio Signal
figure;
plot(t, reconstructedSignal);
title('Reconstructed Audio Signal');
xlabel('Time (s)');
ylabel('Amplitude');
grid on;

% Plot Quantized Signal
figure;
plot(t, quantizedSignal);
title('Quantized Signal');
xlabel('Time (s)');
ylabel('Amplitude');
grid on;

% Plot SNR Over Time
snr_time = 10 * log10(movmean(audioSignal.^2, fs) ./ movmean(noise.^2, fs));
figure;
plot(t, snr_time);
title('SNR Over Time');
xlabel('Time (s)');
ylabel('SNR (dB)');
grid on;

% Frequency spectrum of original and reconstructed signals
f = linspace(0, fs/2, floor(length(audioSignal)/2) + 1);
fftOriginal = abs(fft(audioSignal));
fftReconstructed = abs(fft(reconstructedSignal));

figure;
plot(f, 20*log10(fftOriginal(1:floor(length(audioSignal)/2) + 1)));
hold on;
plot(f, 20*log10(fftReconstructed(1:floor(length(audioSignal)/2) + 1)));
title('Frequency Spectrum');
xlabel('Frequency (Hz)');
ylabel('Magnitude (dB)');
legend('Original', 'Reconstructed');
grid on;
hold off;

% Quantization Table (if needed)
n_bits = 8;
quantizationLevels = 2^n_bits;
samplingQuantizationTable = table(fs, duration, n_bits, quantizationLevels, ...
                                  'VariableNames', {'SamplingRate_Hz', 'Duration_sec', 'BitDepth', 'QuantizationLevels'});

disp('Sampling and Quantization Table:');
disp(samplingQuantizationTable);

% Step 1: Calculate the original file size based on original bit depth
originalFileSizeBits = audioInfo.TotalSamples * audioInfo.BitsPerSample;  % Original size in bits
originalFileSizeBytes = originalFileSizeBits / 8;  % Convert to bytes

% Step 4: Calculate the redundancy of compression
redundancy = 1 - (entropyValue / n_bits);  % Redundancy formula
disp(['Redundancy: ', num2str(redundancy * 100), ' %']);

% Step 2: Calculate the size of the quantized file in bits
quantizedFileSizeBits = numel(quantizedSignalInt) * n_bits;  % Quantized signal size in bits
quantizedFileSizeBytes = quantizedFileSizeBits / 8;  % Convert to bytes

% Step 3: Calculate the size of the compressed file in bits
compressedFileSizeBits = numel(huffEncodedSignal);  % Huffman encoded signal length in bits
compressedFileSizeBytes = compressedFileSizeBits / 8;  % Convert to bytes

% Display the file sizes
disp(['Original File Size (Uncompressed): ', num2str(originalFileSizeBytes), ' Bytes (', num2str(originalFileSizeBits), ' bits)']);
disp(['Quantized File Size: ', num2str(quantizedFileSizeBytes), ' Bytes (', num2str(quantizedFileSizeBits), ' bits)']);
disp(['Compressed File Size: ', num2str(compressedFileSizeBytes), ' Bytes (', num2str(compressedFileSizeBits), ' bits)']);
##### SOURCE END #####
-->
</div></body></html>